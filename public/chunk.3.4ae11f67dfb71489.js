webpackJsonp([3],{En42:function(t,e,n){var i=n("EsKC");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n("FIqI")("13277684",i,!0,{})},EsKC:function(t,e,n){(e=t.exports=n("i7zX")(!1)).push([t.i,".Index_area_3QADw_aW{width:142px;height:142px;background:#f7f7f7;margin:0 auto;border:1px solid #eee}.Index_area_3QADw_aW[status=failed]{border-color:#d22f25}.Index_foot_3QADw_aW{text-align:center;margin:40px auto}.Index_point_3QADw_aW{float:left;width:12px;height:12px;margin:1px;background:#fff;border-radius:2px}.Index_point_3QADw_aW[role=body]{background:#666}.Index_point_3QADw_aW[role=head]{background:#222}.Index_point_3QADw_aW[role=food]{background:#d22f25;border-radius:100%}",""]),e.locals={area:"Index_area_3QADw_aW",foot:"Index_foot_3QADw_aW",point:"Index_point_3QADw_aW"}},GUWu:function(t,e,n){var i=n("psPk");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n("FIqI")("00882d6c",i,!0,{})},iszG:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e.x,this.y=e.y}return i(t,[{key:"is",value:function(t){return this.x===t.x&&this.y===t.y}},{key:"distanceOf",value:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}}]),t}();var a=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o),e}(),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Object.assign(this,e)}return s(t,[{key:"isHead",value:function(t){return this.head.is(t)}},{key:"isInBody",value:function(t){return this.body.some(function(e){return e.is(t)})}},{key:"unshift",value:function(t){return this.body.unshift(t)}},{key:"pop",value:function(){return this.body.pop()}},{key:"getNaturalDirection",value:function(){var t=this.head,e=this.body[1];if(e)return(t.x-e.x+1)*Math.abs(t.x-e.x)+(t.y-e.y+2)*Math.abs(t.y-e.y)}},{key:"length",get:function(){return this.body.length}},{key:"head",get:function(){return this.body[0]}},{key:"tail",get:function(){return this.body[this.length-1]}}]),t}(),h={left:0,up:1,right:2,down:3},u={name:"u-snake-game",props:{width:{type:Number,default:12},height:{type:Number,default:12},body:{type:Array,default:function(){return[{x:this.width/2,y:this.height/2}]}},initialFood:{type:Array,default:function(){return[]}},foodCount:{type:Number,default:1/0},manual:{type:Boolean,default:!1},debug:{type:Boolean,default:!1},nobrain:{type:Boolean,default:!1},interval:{type:Number,default:10}},data:function(){for(var t={pointMetrix:[],food:void 0,foodLeft:0,snake:void 0,status:"",playing:!1,stepCount:0,pathThought:[]},e=0;e<this.height;e++)for(var n=0;n<this.width;n++)t.pointMetrix.push(new o({x:n,y:e}));return t},computed:{areaWidth:function(){return 14*this.width+2},areaHeight:function(){return 14*this.height+2}},created:function(){this.reset()},methods:{reset:function(){this.snake=new r({direction:0,body:this.body.map(function(t){return new o(t)})}),this.initialFood_=this.initialFood.map(function(t){return new o(t)}),Object.assign(this,{food:this.getFood(),foodLeft:this.foodCount,status:"",playing:!1,stepCount:0,pathThought:[]}),!this.manual&&this.think()},getFood:function(){if(this.initialFood_.length)return this.initialFood_.shift();for(var t=Math.random()*(this.pointMetrix.length-this.snake.length)>>0,e=0;e<this.pointMetrix.length;e++){var n=this.pointMetrix[e];if(!this.snake.isInBody(n)){if(!t)return this.food=n;t--}}},getRole:function(t){return this.food&&this.food.is(t)?"food":this.snake.isHead(t)?"head":this.snake.isInBody(t)?"body":void 0},isInPathThought:function(t){return this.pathThought.some(function(e){return e.is(t)})},getAndCheckNext:function(t,e,n){var i=new o(t);return e===h.left?i.x--:e===h.right?i.x++:e===h.up?i.y--:e===h.down&&i.y++,n&&i.is(n)?i:!(i.x<0||i.x>=this.width||i.y<0||i.y>=this.height)&&(!this.snake.isInBody(i)&&i)},getAndCheckNext2:function(t,e,n){var i=new o(t);return e===h.left?i.x--:e===h.right?i.x++:e===h.up?i.y--:e===h.down&&i.y++,n&&i.is(n)?i:!(i.x<0||i.x>=this.width||i.y<0||i.y>=this.height)&&(!this.getDynamicBody(t).some(function(t){return i.is(t)})&&i)},getDynamicBody:function(t,e){for(var n=[];t&&t.prev;)n.push(t),t=t.prev;return n.concat(this.snake.body).slice(0,e?this.snake.length+1:this.snake.length)},step:function(){var t=this.getAndCheckNext(this.snake.head,this.snake.direction);if(t){if(this.snake.unshift(t),this.food.is(t)){if(this.foodLeft--,this.snake.length===this.width*this.height)return this.food=void 0,this.status="success",void(this.playing=!1);this.food=this.getFood(),this.foodLeft||(this.foodLeft=this.foodCount,this.playing=!1)}else this.snake.pop();return this.stepCount++,!this.manual&&this.think(),!0}return this.status="failed",this.playing=!1,!1},playOrPause:function(){this.playing?this.playing=!1:this.status||(this.playing=!0,this.animate())},animate:function(){this.step(),this.playing&&setTimeout(this.animate.bind(this),this.interval)},onKeyDown:function(t){if(this.manual){t.preventDefault();var e=t.keyCode-37;this.snake.length>=2&&2===Math.abs(this.snake.direction-e)||(this.snake.direction=e,!this.playing&&this.step())}},think:function(){if(this.nobrain){var t=this.snake.head;0===t.y?this.snake.direction=0===t.x?h.down:h.left:t.x%2==0?this.snake.direction=t.y===this.height-1?h.right:h.down:this.snake.direction=1===t.y&&t.x!==this.width-1?h.right:h.up}else if(this.pathThought.length>1){this.pathThought.shift();this.snake.direction=this.pathThought[0].direction}else{this.pathThought=[];var e=Object.assign(new a(this.snake.head),{prev:null,distance:0,direction:this.snake.getNaturalDirection()}),n=this.bfs(e,this.food);if(n||(n=this.bfs(e,this.snake.tail)),n){for(var i=n;i&&i.prev;)this.pathThought.unshift(i),i=i.prev;this.snake.direction=this.pathThought[0].direction}else for(var o in this.playing=!1,h){if(this.getAndCheckNext(e,h[o])){this.snake.direction=h[o];break}}}},bfs:function(t,e,n){var i=this,o=[],s=function(t){return o[t.y*i.width+t.x]},r=function(t){return o[t.y*i.width+t.x]=t};r(t);for(var u=[t];u.length;){var f=u.shift();for(var d in h)if(void 0===f.direction||2!==Math.abs(f.direction-h[d])){var l=this.getAndCheckNext2(f,h[d],e);if(l){if(l=Object.assign(new a(l),{prev:f,distance:f.distance+1,direction:h[d]}),n){var c=this.getDynamicBody(l,l.is(e)),y=c[c.length-1],p=this.bfs(l,y);if(!p)continue;if(l.is(e)){if(this.debug,p.distanceOf(e)<=1)continue;return l}}else if(l.is(e))return l;var g=s(l);(!g||g.distance>l.distance)&&(u.push(l),r(l))}}}}}},f={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.root,attrs:{tabindex:"1"},on:{keydown:t.onKeyDown}},[n("div",{class:t.$style.area,style:{width:t.areaWidth+"px",height:t.areaHeight+"px"},attrs:{status:t.status}},t._l(t.pointMetrix,function(e){return n("div",{class:t.$style.point,attrs:{role:t.getRole(e),path:t.isInPathThought(e)}})}),0),n("div",{class:t.$style.foot},[n("u-button",{nativeOn:{click:function(e){t.playOrPause()}}},[t._v(t._s(t.playing?"⏸":"▶️"))]),n("u-button",{nativeOn:{click:function(e){t.step()}}},[t._v("下一步")]),n("u-button",{nativeOn:{click:function(e){t.reset()}}},[t._v("重置")])],1),n("div",{class:t.$style.foot},[t._v("\n        步数："+t._s(t.stepCount)+", 长度："+t._s(t.snake.length)+"\n    ")])])},staticRenderFns:[]},d={};var l=n("OLXp")(u,f,!1,function(t){d.$style=n("GUWu"),this.$style=d.$style},null,null).exports;var c={components:function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},l.name,l)},y={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("h1",[t._v("贪吃蛇AI")]),n("u-snake-game",{attrs:{width:12,height:12}}),n("h3",[t._v("单纯寻路")]),n("h4",[t._v("容易进入死胡同")]),n("u-snake-game",{attrs:{width:6,height:6,body:[{x:3,y:1},{x:2,y:1},{x:1,y:1},{x:0,y:1},{x:0,y:2},{x:0,y:3},{x:1,y:3},{x:2,y:3},{x:3,y:3},{x:4,y:3},{x:5,y:3}],"initial-food":[{x:1,y:2}],"food-count":1}}),n("p"),n("u-snake-game",{attrs:{width:6,height:6,body:[{x:1,y:0},{x:2,y:0},{x:3,y:0},{x:3,y:1},{x:3,y:2},{x:3,y:3},{x:3,y:4},{x:2,y:4},{x:1,y:4},{x:0,y:4},{x:0,y:3},{x:1,y:3},{x:1,y:2}],"initial-food":[{x:0,y:2}],"food-count":1,debug:""}}),n("h4",[t._v("能吃的情况一定有最短路径，障碍物要动态分析")]),n("u-snake-game",{attrs:{width:6,height:6,body:[{x:4,y:2},{x:4,y:1},{x:3,y:1},{x:2,y:1},{x:1,y:1},{x:0,y:1}],"initial-food":[{x:0,y:0}],"food-count":1}}),n("h4",[t._v("能活下来的充分条件是有通向尾巴的路径")]),n("p",[t._v("每一步行动都把这个充分条件作为判断依据")]),n("h4",[t._v("无脑模式")]),n("u-snake-game",{attrs:{width:6,height:6,body:[{x:0,y:0}],nobrain:""}}),t._m(0),n("h3",[t._v("怎么把蛇弄死")]),n("p",[t._v("定理1：对于任意随机食物序列，贪吃蛇能吃满所有格子的必要条件是贪吃蛇所走的路径一定能首尾相连。")])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("智能checkNext")]),e("li",[this._v("智能判断封闭路径")]),e("li",[this._v("3D贪吃蛇")])])}]},p={};var g=n("OLXp")(c,y,!1,function(t){p.$style=n("En42"),this.$style=p.$style},null,null);e.default=g.exports},psPk:function(t,e,n){(e=t.exports=n("i7zX")(!1)).push([t.i,".SnakeGame_area_1PCUlB8S{background:#f7f7f7;margin:0 auto;border:1px solid #eee}.SnakeGame_area_1PCUlB8S[status=failed]{border-color:#d22f25}.SnakeGame_area_1PCUlB8S[status=success]{border-color:#41b883}.SnakeGame_foot_1PCUlB8S{text-align:center;margin:0 auto}.SnakeGame_point_1PCUlB8S{float:left;width:12px;height:12px;margin:1px;background:#fff;border-radius:2px}.SnakeGame_point_1PCUlB8S[role=body]{background:#41b883}.SnakeGame_point_1PCUlB8S[role=head]{background:#35495e}.SnakeGame_point_1PCUlB8S[path]{-webkit-box-shadow:inset 0 0 10px 10px rgba(0,0,0,.15);box-shadow:inset 0 0 10px 10px rgba(0,0,0,.15)}.SnakeGame_point_1PCUlB8S[role=food]{background:#e96900;border-radius:100%;-webkit-box-shadow:none;box-shadow:none}",""]),e.locals={root:"SnakeGame_1PCUlB8S",area:"SnakeGame_area_1PCUlB8S",foot:"SnakeGame_foot_1PCUlB8S",point:"SnakeGame_point_1PCUlB8S"}}});